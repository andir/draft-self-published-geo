<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
    <!ENTITY rfc2119 PUBLIC ""
      "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
    <!ENTITY rfc3629 PUBLIC ""
      "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3629.xml">
    <!ENTITY rfc4180 PUBLIC ""
      "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4180.xml">
    <!ENTITY rfc4291 PUBLIC ""
      "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4291.xml">
    <!ENTITY rfc4632 PUBLIC ""
      "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4632.xml">
]>

<rfc category="exp"
     ipr="trust200902"
     docName="draft-self-published-geo-00.txt">

<?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>

<?rfc toc="yes" ?>
<?rfc symrefs="yes" ?>
<?rfc sortrefs="yes"?>
<?rfc iprnotified="no" ?>
<?rfc strict="yes" ?>
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>

  <front>
    <title>Self-published IP Geolocation Data</title>
    <author initials="E." surname="Kline" fullname="Erik Kline">
      <organization>Google, Inc.</organization>
    </author>
    <author initials="K." surname="Duleba" fullname="Krzysztof Duleba">
      <organization>Google, Inc.</organization>
    </author>
    <date/>
    <abstract>
      <t>
Self-published IP Geolocation Data: everybody wants something like this,
really.
      </t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">
      <t>
      </t>
    </section>

    <section title="Requirements notation">
      <t>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be
interpreted as described in <xref target="RFC2119"/>.
      </t>
    </section>

    <section title="Geolocation Information Feeds">
      <section title="Specification">
        <t>
For operational simplicity, every feed should contain data about all IP
addresses the provider wants to publish.  Alternatives, like publishing
only entries for IP addresses whose geolocation data has changed or differ
from current observed geolocation behavior "at large", are likely to be too
operationally complex.
        </t>

        <t>
Feeds MUST use UTF-8 <xref target="RFC3629"/> character encoding.
Text after a '#' character is treated as a comment only and ignored.
Blank lines are similarly ignored.
        </t>

        <t>
Feeds MUST be in comma separated values format as described in
<xref target="RFC4180"/>.  Each feed entry is a text line of the form:
          <list style="empty">
<t>IP_address_or_cidr,country,region,city,postal_code</t>
          </list>
        </t>

        <t>
IP address fields are mandatory, the rest is optional (can be empty), though
the requisite minimum number of commas SHOULD be present.
        </t>

        <t>
Unparsable entries, in part or in full, SHOULD be discarded.
        </t>

        <section title="IP address field">
          <t>
Each IP address field MUST be either a single IP address or an IP prefix in
CIDR notation in conformance with
<eref target="http://tools.ietf.org/html/rfc4632#section-3.1">section 3.1</eref>
of <xref target="RFC4632"/> for IPv4 or
<eref target="http://tools.ietf.org/html/rfc4291#section-2.3">section 2.3</eref>
of <xref target="RFC4291"/> for IPv6.
          </t>
          <t>
Examples include "192.0.2.1" and "192.0.2.0/24" for IPv4 and "2001:db8::1"
and "2001:db8::/32" for IPv6.
          </t>
        </section>

        <section title="Country field">
          <t>
The country field SHOULD be a 2 letter ISO country code
(http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2), case-insensitive.  Empty
country fields or "ZZ" indicate unassigned reserved IPs for which existing
geolocation information can, from the perspective of the publisher, safely be
discarded.
          </t>
          <t>
Examples include "US" for the United States, "JP" for Japan, and "PL" for
Poland.
          </t>
        </section>

        <section title="Region field">
          <t>
Region field should be a ISO region code
(http://en.wikipedia.org/wiki/ISO_3166-2), case-insensitive.
          </t>
          <t>
Examples include "IE-D" for Dublin, Ireland.
          </t>
        </section>

        <section title="City field">
          <t>
City field should be free text, excluding comma (',').
          </t>
          <t>
Examples include "Dublin", "New York", and "São Paulo".
          </t>
        </section>

        <section title="Postal code field">
          <t>
Postal code field should be free text, excluding comma (',').
          </t>
          <t>
Examples include "106-6126" (in Minato ward, Tokyo, Japan).
          </t>
        </section>
      </section>

      <section title="Examples">
        <t>
Example entries using different IP address formats and describing locations
at country, region, city and postal code granularity level, respectively:
          <figure>
            <artwork>
    192.0.2.0/25,US,US-AL,,
    192.0.2.5,US,US-AL,Alabaster,
    192.0.2.128/25,PL,PL-MZ,,02-784
    2001:db8:cafe::/48,PL,PL-MZ,,02-784
            </artwork>
          </figure>
        </t>

        <t>
Speculatively, RIPE has published geolocation information for their meeting
network prefixes, which change location in accordance with each new meeting.
<xref target="RIPE_NCC_GEO"/> at the time of writing contains:
          <figure>
            <artwork>
    193.0.24.0/21,IE,IE-D,Dublin,
    2001:67c:64::/48,IE,IE-D,Dublin,
            </artwork>
          </figure>
        </t>
      </section>
    </section>

    <section title="Finding Self-published IP Geolocation Feeds">
      <section title="Ad hoc 'well known' URIs">
        <t>
        </t>
      </section>

      <section title="Using 'reverse' DNS">
        <t>
TODO(ek): document crazy _geo.4.3.2.1.in-addr.arpa TXT record format that
basically returns "v=1 https://example.net/ipgeo/v1.csv".  Also: can ask the
root of the zone in the SOA.
        </t>
      </section>
    </section>

    <section title="Use Policies">
      <t>
This incorporates no mechanism to communicate acceptable use policies for
self-published data.  Publication itself is inferred as a desire by the
publisher for the data to be freely consumed, similar to the publication of
hostnames in the DNS.
      </t>
      <t>
TODO(ek): That having been said, there are implications of trusting geolocation
for IP addresses for which the publishing authority is not authoritative.
Comment about "caveat emptor".
      </t>
    </section>

    <section title="Security Considerations">
      <t>
There is no true security in the obscurity of the location of any given IP
address.  Publication of this data increases the ease with which such
location data may be exploited, but fundamentally opens no new attack
vectors.
      </t>
    </section>

    <section title="Acknowledgements">
      <t>
Menno Schepers and Marco Hogewoning of the RIPE NCC.
      </t>
    </section>
  </middle>

  <back>
      <references title="Normative References">
&rfc2119;

&rfc3629;

&rfc4180;

&rfc4291;

&rfc4632;
      </references>

      <references title="Informative References">
<reference target="http://meetings.ripe.net/geo/google.csv"
           anchor="RIPE_NCC_GEO">
<front>
  <title>RIPE Meeting Geolocation Data</title>
  <author fullname="Menno Schepers" initials="M." surname="Schepers">
    <organization abbrev="RIPE NCC">
Réseaux IP Européens Network Coordination Centre
    </organization>
  </author>
</front>
</reference>
      </references>
  </back>

</rfc>
